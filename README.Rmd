taxa
====

```{r echo=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,
  message = FALSE,
  collapse = TRUE,
  comment = "#>"
)
```

[![Build Status](https://travis-ci.org/ropenscilabs/taxa.svg?branch=master)](https://travis-ci.org/ropenscilabs/taxa)
[![codecov](https://codecov.io/gh/ropenscilabs/taxa/branch/master/graph/badge.svg)](https://codecov.io/gh/ropenscilabs/taxa)
[![Project Status: WIP - Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](http://www.repostatus.org/badges/latest/wip.svg)](http://www.repostatus.org/#wip)

taxon classes for R

`taxa` defines taxonomic classes for R. The goal is to use these classes as low 
level fundamental taxonomic classes that other R packages can build on and use.

There are two distinct sets of classes in `taxa`:

* so called `taxa` classes that are concerned only with taxonomic information
* so called `taxmap` classes that are concerned with combined taxonomic and 
other data (e.g., molecular sequences)

## use cases

* use in [binomen](https://github.com/ropensci/binomen):
    * if this pkg does classes, `binomen` can focus on [verbs](https://github.com/ropensci/binomen#verbs), e.g., manipulating taxonomic classes, doing `split-apply-combine` type things
* use in [taxize](https://github.com/ropensci/taxize):
    * as we don't want to break things, probably ideal to have coerion fxns, e.g., `as.taxon()`, which will convert e.g., the output of `get_uid()` to a `taxa` taxonomic class, which we can then go dowstream and do things with (i.e., whatever we build on top of the classes)
    * Or we could even have output of `get_*()` functions do coercion to `taxa` classes on output since they are just simple S3 classes without print methods right now
* use in [metacoder](https://github.com/grunwaldlab/metacoder): ???

## Installation

```{r}
devtools::install_github("ropenscilabs/taxa")
```

```{r}
library("taxa")
```

## taxa classes

### taxon components

database

```{r}
(x <- taxon_database(
  "ncbi",
  "http://www.ncbi.nlm.nih.gov/taxonomy",
  "NCBI Taxonomy Database",
  "*"
))
x$name
x$url
```

rank

```{r}
taxon_rank("species")
```

name

```{r}
taxon_name("Poa")
```

id

```{r}
taxon_id(12345)
```

### taxon

```{r}
(x <- taxon(
  name = taxon_name("Poa annua"),
  rank = taxon_rank("species"),
  id = taxon_id(93036)
))
```

### taxa

```{r}
(x <- taxon(
  name = taxon_name("Poa annua"),
  rank = taxon_rank("species"),
  id = taxon_id(93036)
))
taxa_(x, x, x)
```

## taxamap classes

### Filter

Remove singleton taxa, but reassign singletons to supertaxa that pass filter

```{r}
filter_taxa(ex_taxmap, 1:3)
```

### Mutate

Add one or more taxon columns

```{r}
mutate_obs(ex_taxmap, "info",
           new_col = "Im new",
           newer_col = paste0(new_col, "er!"))
```

### Select 

Select taxon columns

```{r}
select_obs(ex_taxmap, "info", dangerous)
```

### Arrange

Sort by taxon name alphabetically

```{r}
arrange_taxa(ex_taxmap, desc(ex_taxmap$taxon_names()))
```

## Contributors

* [Scott Chamberlain](https://github.com/sckott)
* [Zachary Foster](https://github.com/zachary-foster)

## Meta

* Please [report any issues or bugs](https://github.com/ropensci/taxa/issues).
* License: MIT
* Get citation information for `taxa` in R doing `citation(package = 'taxa')`
* Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.
